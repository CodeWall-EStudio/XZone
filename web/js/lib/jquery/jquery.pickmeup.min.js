/**
 * @package		PickMeUp - jQuery datepicker plugin
 * @author		Nazar Mokrynskyi <nazar@mokrynskyi.com>
 * @author		Stefan Petre <www.eyecon.ro>
 * @copyright	Copyright (c) 2013-2014, Nazar Mokrynskyi
 * @copyright	Copyright (c) 2008-2009, Stefan Petre
 * @license		MIT License, see license.txt
 */
(function(e){function t(){var e=new Date(this.toString()),t=28,n=e.getMonth();while(e.getMonth()==n)++t,e.setDate(t);return t-1}e.addDays=function(e){this.setDate(this.getDate()+e)},e.addMonths=function(e){var n=this.getDate();this.setDate(1),this.setMonth(this.getMonth()+e),this.setDate(Math.min(n,t.apply(this)))},e.addYears=function(e){var n=this.getDate();this.setDate(1),this.setFullYear(this.getFullYear()+e),this.setDate(Math.min(n,t.apply(this)))},e.getDayOfYear=function(){var e=new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0),t=new Date(this.getFullYear(),0,0,0,0,0),n=e-t;return Math.floor(n/24*60*60*1e3)}})(Date.prototype),function(e){function r(){var t=e(this).data("pickmeup-options"),r=this.pickmeup,i=Math.floor(t.calendars/2),o,u,a,f,l,c,h=0,p,d,v,m=(new Date).setHours(0,0,0,0).valueOf();r.find(".pmu-instance > :not(nav)").remove();for(var g=0;g<t.calendars;g++){o=new Date(t.current),v=r.find(".pmu-instance").eq(g),r.hasClass("pmu-view-years")?(o.addYears((g-i)*12),a=o.getFullYear()-6+" - "+(o.getFullYear()+5)):r.hasClass("pmu-view-months")?(o.addYears(g-i),a=o.getFullYear()):r.hasClass("pmu-view-days")&&(o.addMonths(g-i),a=s(o,"B, Y",t.locale)),v.find(".pmu-month").text(a),f=o.getFullYear()-6,u={data:[],class_name:"pmu-years"};for(var y=0;y<12;y++)u.data.push(f+y);d=n.months(u),o.setDate(1),u=[],c=o.getMonth(),l=(o.getDay()-t.first_day)%7,o.addDays(-(l+(l<0?7:0))),h=0;while(h<42){l={text:o.getDate(),class_name:[]},c!=o.getMonth()&&l.class_name.push("pmu-not-in-month"),o.getDay()==0?l.class_name.push("pmu-sunday"):o.getDay()==6&&l.class_name.push("pmu-saturday");var b=t.render(o)||{},w=o.valueOf(),E=t.min&&t.min>o||t.max&&t.max<o;!E&&(b.selected||t.date==w||e.inArray(w,t.date)>-1||t.mode=="range"&&w>=t.date[0]&&w<=t.date[1])&&l.class_name.push("pmu-selected"),w==m&&l.class_name.push("pmu-today"),(b.disabled||E)&&l.class_name.push("pmu-disabled"),b.class_name&&l.class_name.push(b.class_name),l.class_name=l.class_name.join(" "),u.push(l),o.addDays(1),h++}d=n.days(u)+d,u={data:t.locale.monthsShort,class_name:"pmu-months"},d=n.months(u)+d,v.append(d)}t.fill.apply(this)}function i(e,t,n){if(e.constructor==Date)return e;if(!e)return new Date;var r=e.split(n);if(r.length>1)return r.forEach(function(e,r,s){s[r]=i(e,t,n)}),r;var s=e.split(/\W+/),o=t.split(/\W+/),u,a,f,l,c,h=new Date;for(var p=0;p<s.length;p++)switch(o[p]){case"d":case"e":u=parseInt(s[p],10);break;case"m":a=parseInt(s[p],10)-1;break;case"Y":case"y":f=parseInt(s[p],10),f+=f>100?0:f<29?2e3:1900;break;case"H":case"I":case"k":case"l":l=parseInt(s[p],10);break;case"P":case"p":/pm/i.test(s[p])&&l<12?l+=12:/am/i.test(s[p])&&l>=12&&(l-=12);break;case"M":c=parseInt(s[p],10)}return new Date(f===undefined?h.getFullYear():f,a===undefined?h.getMonth():a,u===undefined?h.getDate():u,l===undefined?h.getHours():l,c===undefined?h.getMinutes():c,0)}function s(e,t,n){var r=e.getMonth(),i=e.getDate(),s=e.getFullYear(),o=e.getDay(),u={},a=e.getHours(),f=a>=12,l=f?a-12:a,c=e.getDayOfYear();l==0&&(l=12);var h=e.getMinutes(),p=e.getSeconds(),d=t.split(""),v;for(var m=0;m<d.length;m++){v=d[m];switch(v){case"a":v=n.daysShort[o];break;case"A":v=n.days[o];break;case"b":v=n.monthsShort[r];break;case"B":v=n.months[r];break;case"C":v=1+Math.floor(s/100);break;case"d":v=i<10?"0"+i:i;break;case"e":v=i;break;case"H":v=a<10?"0"+a:a;break;case"I":v=l<10?"0"+l:l;break;case"j":v=c<100?c<10?"00"+c:"0"+c:c;break;case"k":v=a;break;case"l":v=l;break;case"m":v=r<9?"0"+(1+r):1+r;break;case"M":v=h<10?"0"+h:h;break;case"p":case"P":v=f?"PM":"AM";break;case"s":v=Math.floor(e.getTime()/1e3);break;case"S":v=p<10?"0"+p:p;break;case"u":v=o+1;break;case"w":v=o;break;case"y":v=(""+s).substr(2,2);break;case"Y":v=s}d[m]=v}return d.join("")}function o(t){var n=e(t.target);if(n.hasClass("pmu-button")){if(n.hasClass("pmu-disabled"))return!1;var r=e(this),i=r.data("pickmeup-options"),o=n.parents(".pmu-instance").eq(0),a=o.parent(),f=e(".pmu-instance",a).index(o),l=new Date(i.current),c;if(n.parent().is("nav"))if(n.hasClass("pmu-month"))l.addMonths(f-Math.floor(i.calendars/2)),a.hasClass("pmu-view-years")?(a.removeClass("pmu-view-years").addClass("pmu-view-days"),n.text(s(l,"B, Y",i.locale))):a.hasClass("pmu-view-months")?i.select_year?(a.removeClass("pmu-view-months").addClass("pmu-view-years"),n.text(l.getFullYear()-6+" - "+(l.getFullYear()+5))):(a.removeClass("pmu-view-months").addClass("pmu-view-days"),n.text(s(l,"B, Y",i.locale))):a.hasClass("pmu-view-days")&&i.select_month&&(a.removeClass("pmu-view-days").addClass("pmu-view-months"),n.text(l.getFullYear()));else{var h=n.hasClass("pmu-prev");a.hasClass("pmu-view-years")?i.current.addYears(h?-12:12):a.hasClass("pmu-view-months")?i.current.addYears(h?-1:1):a.hasClass("pmu-view-days")&&i.current.addMonths(h?-1:1)}else if(!n.hasClass("pmu-disabled"))if(a.hasClass("pmu-view-years"))i.current.setFullYear(parseInt(n.text(),10)),a.removeClass("pmu-view-years").addClass("pmu-view-months");else if(a.hasClass("pmu-view-months"))i.current.setMonth(o.find(".pmu-months .pmu-button").index(n)),i.current.setFullYear(parseInt(o.find(".pmu-month").text(),10)),i.current.addMonths(Math.floor(i.calendars/2)-f),a.removeClass("pmu-view-months").addClass("pmu-view-days");else{c=parseInt(n.text(),10),l.addMonths(f-Math.floor(i.calendars/2)),n.hasClass("pmu-not-in-month")&&l.addMonths(c>15?-1:1),l.setDate(c);switch(i.mode){case"multiple":c=l.setHours(0,0,0,0).valueOf(),e.inArray(c,i.date)>-1?e.each(i.date,function(e,t){return t==c?(i.date.splice(e,1),!1):!0}):i.date.push(c);break;case"range":i.lastSel||(i.date[0]=l.setHours(0,0,0,0).valueOf()),c=l.setHours(23,59,59,0).valueOf(),c<i.date[0]?(i.date[1]=i.date[0]+86399e3,i.date[0]=c-86399e3):i.date[1]=c,i.lastSel=!i.lastSel;break;default:i.date=l.valueOf()}(function(e){r.is("input")&&r.val(i.mode=="single"?e[0]:e[0].join(i.separator)),i.change.apply(this,e)})(u(i));if(i.hide_on_select&&(i.mode!="range"||!i.lastSel))return i.binded.hide(),!1}i.binded.fill()}return!1}function u(t){var n;return t.mode=="single"?(n=new Date(t.date),[s(n,t.format,t.locale),n]):(n=[[],[]],e.each(t.date,function(e,r){var i=new Date(r);n[0].push(s(i,t.format,t.locale)),n[1].push(i)}),n)}function a(t){var n=this.pickmeup;if(t||!n.is(":visible")){var r=e(this),s=r.data("pickmeup-options"),o=r.offset(),u={l:document.documentElement.scrollLeft,t:document.documentElement.scrollTop,w:document.documentElement.clientWidth,h:document.documentElement.clientHeight},a=o.top,f=o.left;s.binded.fill(),r.is("input")&&r.pickmeup("set_date",i(r.val(),s.format,s.separator)).keydown(function(e){e.which==9&&r.pickmeup("hide")}),s.before_show();switch(s.position){case"top":a-=n.outerHeight();break;case"left":f-=n.outerWidth();break;case"right":f+=this.offsetWidth;break;case"bottom":a+=this.offsetHeight}a+n.offsetHeight>u.t+u.h&&(a=o.top-n.offsetHeight),a<u.t&&(a=o.top+this.offsetHeight+n.offsetHeight),f+n.offsetWidth>u.l+u.w&&(f=o.left-n.offsetWidth),f<u.l&&(f=o.left+this.offsetWidth);if(s.show()==0)return;n.css({display:"inline-block",top:a+"px",left:f+"px"}),e(document).on("mousedown",s.binded.hide).on("resize",[!0],s.binded.forced_show)}}function f(){a.call(this,!0)}function l(t){if(!t||!t.target||t.target!=this&&!(this.pickmeup.get(0).compareDocumentPosition(t.target)&16)){var n=this.pickmeup,r=e(this).data("pickmeup-options");r.hide()!=0&&(n.hide(),e(document).off("mousedown",r.binded.hide).off("resize",r.binded.forced_show),r.date[1]=r.date[0],r.lastSel=!1)}}function c(){var t=e(this).data("pickmeup-options");e(document).off("mousedown",t.binded.hide).off("resize",t.binded.forced_show),t.binded.forced_show()}function h(){var t=e(this).data("pickmeup-options");t.mode!="single"&&(t.date=[],t.binded.fill())}function p(t){return u(e(this).data("pickmeup-options"))[t?0:1]}function d(t){var n=e(this).data("pickmeup-options");n.date=t,typeof n.date=="string"?n.date=i(n.date,n.format,n.separator).setHours(0,0,0,0):n.date.constructor==Date&&n.date.setHours(0,0,0,0),n.date||(n.date=new Date,n.date.setHours(0,0,0,0));if(n.mode!="single")if(n.date.constructor!=Array)n.date=[n.date.valueOf()],n.mode=="range"&&n.date.push((new Date(n.date[0])).setHours(23,59,59,0).valueOf());else{for(var r=0;r<n.date.length;r++)n.date[r]=i(n.date[r],n.format,n.separator).setHours(0,0,0,0).valueOf();n.mode=="range"&&(n.date[1]=(new Date(n.date[1])).setHours(23,59,59,0).valueOf())}else n.date=n.date.valueOf();n.current=new Date(n.mode!="single"?n.date[0]:n.date),n.binded.fill()}e.pickmeup=e.extend(e.pickmeup||{},{date:new Date,flat:!1,first_day:1,prev:"&#9664;",next:"&#9654;",mode:"single",select_year:!0,select_month:!0,view:"days",calendars:1,format:"d-m-Y",position:"bottom",trigger_event:"click",class_name:"",separator:" - ",hide_on_select:!1,min:null,max:null,render:function(){},change:function(){return!0},before_show:function(){return!0},show:function(){return!0},hide:function(){return!0},fill:function(){return!0},locale:{days:["日","一","二","三","四","五","六","日"],daysShort:["日","一","二","三","四","五","六","日"],daysMin:["日","一","二","三","四","五","六","日"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthsShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]}});var t={years:"pmu-view-years",months:"pmu-view-months",days:"pmu-view-days"},n={wrapper:'<div class="pickmeup" />',head:function(e){var t="";for(var n=0;n<7;++n)t+="<div>"+e.day[n]+"</div>";return'<div class="pmu-instance"><nav><div class="pmu-prev pmu-button">'+e.prev+"</div>"+'<div class="pmu-month pmu-button" />'+'<div class="pmu-next pmu-button">'+e.next+"</div>"+"</nav>"+'<nav class="pmu-day-of-week">'+t+"</nav>"+"</div>"},days:function(e){var t="";for(var n=0;n<42;++n)t+='<div class="'+e[n].class_name+' pmu-button">'+e[n].text+"</div>";return'<div class="pmu-days">'+t+"</div>"},months:function(e){var t="";for(var n=0;n<12;++n)t+='<div class="pmu-button">'+e.data[n]+"</div>";return'<div class="'+e.class_name+'">'+t+"</div>"}};e.fn.pickmeup=function(s){if(typeof s=="string"){var u,v=Array.prototype.slice.call(arguments,1);switch(s){case"hide":case"show":case"clear":case"update":this.each(function(){u=e(this).data("pickmeup-options"),u&&u.binded[s]()});break;case"get_date":return u=this.data("pickmeup-options"),u?u.binded.get_date(v[0]):null;case"set_date":this.each(function(){u=e(this).data("pickmeup-options"),u&&u.binded[s].apply(this,v)})}return this}return this.each(function(){var u=e(this);if(u.data("pickmeup-options"))return;var v,m,g=e.extend({},e.pickmeup,s||{});for(v in g)m=u.data("pmu-"+v),typeof m!="undefined"&&(g[v]=m);g.calendars=Math.max(1,parseInt(g.calendars,10)||1),g.mode=/single|multiple|range/.test(g.mode)?g.mode:"single",typeof g.min=="string"?g.min=i(g.min,g.format,g.separator).setHours(0,0,0,0):g.min&&g.min.constructor==Date&&g.min.setHours(0,0,0,0),typeof g.max=="string"?g.max=i(g.max,g.format,g.separator).setHours(23,59,59,0):g.max&&g.max.constructor==Date&&g.max.setHours(23,59,59,0),typeof g.date=="string"?g.date=i(g.date,g.format,g.separator).setHours(0,0,0,0):g.date.constructor==Date&&g.date.setHours(0,0,0,0),g.date||(g.date=new Date,g.date.setHours(0,0,0,0));if(g.mode!="single"){if(g.date.constructor!=Array)g.date=[g.date.valueOf()],g.mode=="range"&&g.date.push((new Date(g.date[0])).setHours(23,59,59,0).valueOf());else{for(v=0;v<g.date.length;v++)g.date[v]=i(g.date[v],g.format,g.separator).setHours(0,0,0,0).valueOf();g.mode=="range"&&(g.date[1]=(new Date(g.date[1])).setHours(23,59,59,0).valueOf())}g.current=new Date(g.date[0])}else g.date=g.date.valueOf(),g.current=new Date(g.date);g.current.setDate(1),g.current.setHours(0,0,0,0);var y,b=e(n.wrapper);this.pickmeup=b,g.class_name&&b.addClass(g.class_name);var w="";for(v=0;v<g.calendars;v++)y=g.first_day,w+=n.head({prev:g.prev,next:g.next,day:[g.locale.daysMin[y++%7],g.locale.daysMin[y++%7],g.locale.daysMin[y++%7],g.locale.daysMin[y++%7],g.locale.daysMin[y++%7],g.locale.daysMin[y++%7],g.locale.daysMin[y++%7]]});u.data("pickmeup-options",g);for(v in g)e.inArray(v,["render","change","before_show","show","hide"])!=-1&&(g[v]=g[v].bind(this));g.binded={fill:r.bind(this),click:o.bind(this),show:a.bind(this),forced_show:f.bind(this),hide:l.bind(this),update:c.bind(this),clear:h.bind(this),get_date:p.bind(this),set_date:d.bind(this)},b.on("click",g.binded.click).addClass(t[g.view]).append(w).on(e.support.selectstart?"selectstart":"mousedown",function(e){e.preventDefault()}),g.binded.fill(),g.flat?b.appendTo(this).css({position:"relative",display:"inline-block"}):(b.appendTo(document.body),u.on(g.trigger_event,g.binded.show))})}}(jQuery)
